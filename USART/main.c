/*
***************************************************************************************************
* Project:  USART
* Filename: main.c
*
* Created: 18.05.2017
* Author:  M. Schuepbach
*
* Description: This is a test program for the USART Driver.
*              Look into the ISR vector for the example.
*              Tested with ATtiny841 and SparkFun Bluetooth Mate Silver
*
***************************************************************************************************
*/

#include "main.h"
#include "USART.h"


/*
***************************************************************************************************
**                                  GLOBAL VARIABLES AND ARRAYS
***************************************************************************************************
*/
// Initialize global variables or arrays here


/*
***************************************************************************************************
**                                             MAIN
***************************************************************************************************
*/
int main(void)
{
    /* Local variables */
    volatile unsigned char test = 0;    /* for debugging */
    
    /* Initializations */
    ATtiny841_board_init();
    USART0_init();
    
    
    /* Main loop */
    while(1)
    {
        
        
    } /* while(1) */
} /* Main */


/*
***************************************************************************************************
**                                           FUNCTIONS
***************************************************************************************************
*/

/*
***************************************************************************************************
* Function: ATtiny841_board_init
* ------------------------------
*   Initializes the ports of the ATtiny841-board
*
***************************************************************************************************
*/
void ATtiny841_board_init(void)
{
    /* 0 -> input | 1 -> output */
            
    /* Bit:  76543210 */
    DDRA = 0b11111111;
    DDRB = 0b11111111;
            
    PORTA = 0b00000000;
    PORTB = 0b00000000;
}

/*
***************************************************************************************************
* Interrupt vector for USART0
* ---------------------------
*
***************************************************************************************************
*/
ISR (USART0_RX_vect)
{
    USART0_send_byte(UDR0);     /* for debugging, just send the received byte back */
}
